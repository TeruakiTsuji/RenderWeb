from ..import global_value as g

def kind2name(kind):
    if kind == g.Kind_21:
        ret = g.Kind_Nm_21
    elif kind == g.Kind_mc:
        ret = g.Kind_Nm_mc
    else:
        ret = g.Kind_Nm_etc
    return ret

def name_num2name(users, name_num):
    ret = ''
    for item in users:
        if item['num'] == name_num:
            ret = item['dispname2']
            break
    #
    if ret == '':
        ret = '(空き)'
    return ret

def name_num2hdcp(hdcps, name_num):
    ret = '0.0'
    for item in hdcps:
        if item[2] == name_num:
            ret = item[9]
            break
    #
    return ret

def name_num2menu(menus, name_num):
    ret = '0'
    for item in menus:
        if item['name_num'] == name_num:
            ret = item['menu_num']
            break
    #
    return ret

def index_no(array, base, fg):
    ret = -1
    num = 0
    exist_fg = False
    for item in array:
        if item == base:
            exist_fg = True
            break
        #
        num = num + 1
    #
    if exist_fg == True:
        if fg == '1':
            ret = num - 1
            if ret < 0:
                ret = 0
        else:
            lenArray = len(array)
            ret = num + 1
            if ret >= lenArray:
                ret = 0
    #
    return ret

def next_ymd(all_ymd, next_val, ymd_val):
    if next_val is not None:
        if next_val == '0':
            ret = all_ymd[0]
        elif next_val == '1' or next_val == '2':
            idx = index_no(all_ymd, ymd_val, next_val)
            ret = all_ymd[idx]
        else:
            ret = all_ymd[-1]
    else:
        if ymd_val is not None:
            ret = ymd_val
        else:
            ret = all_ymd[-1]
    #
    return ret

def best_gross(scores):
    ret = 999
    for item in scores:
        if item['gross'] < ret:
            ret = item['gross']
    return ret

def bg_mark(gross, bg):
    ret = ''
    if gross == bg:
        ret = '★'
    return ret

def get_menu_str(menu_val):
    ret = '〇'
    if menu_val == 1:
        ret = '●'
    elif menu_val == 2:
        ret = '△'
    #
    return ret

def award_info(num):
    items = [ \
      {'num':10,'01':'5000','02':'3000','03':'2000'}, \
      {'num':11,'01':'5000','02':'3000','03':'2000','10':'1000'}, \
      {'num':12,'01':'5000','02':'3000','03':'2000','05':'2000'}, \
      {'num':13,'01':'5000','02':'3000','03':'2000','05':'2000','12':'1000'}, \
      {'num':14,'01':'5000','02':'3000','03':'2000','05':'2000','10':'2000'}, \
      {'num':15,'01':'5000','02':'3000','03':'2000','05':'2000','10':'2000','14':'1000'}, \
      {'num':16,'01':'5000','02':'3000','03':'2000','05':'2000','10':'2000','15':'2000'}, \
      {'num':17,'01':'5000','02':'3000','03':'2000','05':'2000','10':'2000','15':'2000','16':'1000'}, \
      {'num':18,'01':'5000','02':'3000','03':'2000','05':'2000','10':'2000','15':'2000','17':'2000'}, \
      {'num':19,'01':'5000','02':'3000','03':'2000','05':'2000','10':'2000','15':'2000','18':'2000','19':'1000'}, \
      {'num':20,'01':'5000','02':'3000','03':'2000','05':'2000','10':'2000','15':'2000','19':'2000','20':'2000'}, \
      {'num':21,'01':'5000','02':'3000','03':'2000','05':'2000','07':'2000','10':'2000','15':'2000','20':'2000','21':'1000'}, \
      {'num':22,'01':'5000','02':'3000','03':'2000','05':'2000','07':'2000','10':'2000','15':'2000','20':'2000','21':'2000'}, \
      {'num':23,'01':'5000','02':'3000','03':'2000','05':'2000','07':'2000','10':'2000','15':'2000','20':'2000','22':'2000','23':'1000'}, \
      {'num':24,'01':'5000','02':'3000','03':'2000','05':'2000','07':'2000','10':'2000','15':'2000','20':'2000','23':'2000','24':'2000'}, \
      {'num':25,'01':'5000','02':'3000','03':'2000','05':'2000','07':'2000','10':'2000','15':'2000','20':'2000','to':'2000','24':'2000','25':'1000'}, \
      {'num':26,'01':'5000','02':'3000','03':'2000','05':'2000','07':'2000','10':'2000','15':'2000','20':'2000','to':'2000','25':'2000','26':'2000'}, \
      {'num':27,'01':'5000','02':'3000','03':'2000','05':'2000','07':'2000','10':'2000','15':'2000','20':'2000','25':'2000','to':'2000','26':'2000','27':'1000'}, \
      {'num':28,'01':'5000','02':'3000','03':'2000','05':'2000','07':'2000','10':'2000','15':'2000','20':'2000','25':'2000','to':'2000','27':'2000','28':'2000'}, \
      {'num':29,'01':'6000','02':'3000','03':'2000','05':'2000','07':'2000','10':'2000','15':'2000','20':'2000','25':'2000','to':'2000','28':'2000','29':'2000'}, \
      {'num':30,'01':'6000','02':'4000','03':'2000','05':'2000','07':'2000','10':'2000','15':'2000','20':'2000','25':'2000','to':'2000','29':'2000','30':'2000'}, \
      {'num':31,'01':'6000','02':'4000','03':'3000','05':'2000','07':'2000','10':'2000','15':'2000','20':'2000','25':'2000','to':'2000','30':'2000','31':'2000'}, \
      {'num':32,'01':'6000','02':'4000','03':'2000','05':'2000','07':'2000','10':'2000','15':'2000','20':'2000','25':'2000','30':'2000','to':'2000','31':'2000','32':'2000'}, \
      {'num':33,'01':'6000','02':'4000','03':'3000','05':'2000','07':'2000','10':'2000','15':'2000','20':'2000','25':'2000','30':'2000','to':'2000','32':'2000','33':'2000'}, \
      {'num':34,'01':'7000','02':'4000','03':'3000','05':'2000','07':'2000','10':'2000','15':'2000','20':'2000','25':'2000','30':'2000','to':'2000','33':'2000','34':'2000'}, \
      {'num':35,'01':'7000','02':'5000','03':'3000','05':'2000','07':'2000','10':'2000','15':'2000','20':'2000','25':'2000','30':'2000','to':'2000','34':'2000','35':'2000'}, \
      {'num':36,'01':'7000','02':'5000','03':'4000','05':'2000','07':'2000','10':'2000','15':'2000','20':'2000','25':'2000','30':'2000','to':'2000','35':'2000','36':'2000'}, \
      {'num':37,'01':'7000','02':'5000','03':'3000','05':'2000','07':'2000','10':'2000','15':'2000','20':'2000','25':'2000','30':'2000','35':'2000','to':'2000','36':'2000','37':'2000'}, \
      {'num':38,'01':'7000','02':'5000','03':'4000','05':'2000','07':'2000','10':'2000','15':'2000','20':'2000','25':'2000','30':'2000','35':'2000','to':'2000','37':'2000','38':'2000'}, \
      {'num':39,'01':'8000','02':'5000','03':'4000','05':'2000','07':'2000','10':'2000','15':'2000','20':'2000','25':'2000','30':'2000','35':'2000','to':'2000','38':'2000','39':'2000'}, \
      {'num':40,'01':'8000','02':'6000','03':'4000','05':'2000','07':'2000','10':'2000','15':'2000','20':'2000','25':'2000','30':'2000','35':'2000','to':'2000','39':'2000','40':'2000'}, \
    ]
    for row in items:
        if row['num'] == num:
            ret = row
            break
    #
    return ret

def awars_lst(awards):
    ret = []
    awards.pop('num')
    sum_yen = 0
    for key, value in awards.items():
        if key == 'to':
            rank = '当日賞'
        else:
            rank = str(int(key)) + '位'
        #
        item = {'rank' : rank, 'yen' : "{:,}".format(int(value))}
        s = value
        sum_yen = sum_yen + int(s)
        ret.append(item)
    #
    item = {'rank' : '合計', 'yen' : "{:,}".format(int(sum_yen))}
    ret.append(item)
    return ret